<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
  <channel>
    <title>Goè¯­è¨€ - æ ‡ç­¾ - </title>
    <link>http://runnerxjtu.github.com/blog/tags/golang/</link>
    <description>Goè¯­è¨€ - æ ‡ç­¾ - </description>
    <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Sun, 16 Oct 2022 16:31:14 &#43;0800</lastBuildDate><atom:link href="http://runnerxjtu.github.com/blog/tags/golang/" rel="self" type="application/rss+xml" /><item>
  <title>ã€é¢è¯•ã€‘åç«¯é¢è¯•é¢˜é›†03</title>
  <link>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/%E5%90%8E%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%8603/</link>
  <pubDate>Sun, 16 Oct 2022 16:31:14 &#43;0800</pubDate>
  <author>ä½œè€…</author>
  <guid>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/%E5%90%8E%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%8603/</guid>
  <description><![CDATA[æ³¨æ„ æœ¬æ–‡å†…å®¹æ¥æºäºï¼šã€Githubã€‘åç«¯é¢è¯•é¢˜é›† ğŸ§¨ ä»€ä¹ˆæ˜¯channelï¼Œä¸ºä»€ä¹ˆå®ƒå¯ä»¥åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Ÿ å±•å¼€æŸ¥çœ‹è¯¦æƒ… Channelæ˜¯Goä¸­çš„â¼€ä¸ªæ ¸â¼¼ç±»å‹ï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆâ¼€ä¸ªç®¡é“ï¼Œé€šè¿‡å®ƒå¹¶å‘æ ¸â¼¼å•å…ƒå°±å¯ä»¥å‘é€æˆ–è€…æ¥æ”¶æ•°æ®è¿›â¾é€šè®¯(communication),Channelä¹Ÿå¯ä»¥ç†è§£æ˜¯â¼€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œé€šè¿‡ç®¡é“è¿›â¾é€šä¿¡ã€‚
Golangçš„Channel,å‘é€â¼€ä¸ªæ•°æ®åˆ°Channel å’Œ ä»Channelæ¥æ”¶â¼€ä¸ªæ•°æ® éƒ½æ˜¯ åŸâ¼¦æ€§çš„ã€‚â½½ä¸”Goçš„è®¾è®¡æ€æƒ³å°±æ˜¯:ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œâ½½æ˜¯é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ï¼Œå‰è€…å°±æ˜¯ä¼ ç»Ÿçš„åŠ é”ï¼Œåè€…å°±æ˜¯Channelã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè®¾è®¡Channelçš„ä¸»è¦â½¬çš„å°±æ˜¯åœ¨å¤šä»»åŠ¡é—´ä¼ é€’æ•°æ®çš„ï¼Œè¿™å½“ç„¶æ˜¯å®‰å…¨çš„ã€‚
âœ¨ è¯»å†™é”æˆ–è€…äº’æ–¥é”è¯»çš„æ—¶å€™èƒ½å†™å—? --æŸ¥çœ‹ç­”æ¡ˆ-- ç­”æ¡ˆï¼šGoä¸­è¯»å†™é”åŒ…æ‹¬è¯»é”å’Œå†™é”ï¼Œå¤šä¸ªè¯»çº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®å…±äº«æ•°æ®ï¼›å†™çº¿ç¨‹å¿…é¡»ç­‰å¾…æ‰€æœ‰è¯»çº¿ç¨‹éƒ½é‡Šæ”¾é”ä»¥åï¼Œæ‰èƒ½å–å¾—é”ï¼›åŒæ ·çš„ï¼Œè¯»çº¿ç¨‹å¿…é¡»ç­‰å¾…å†™çº¿ç¨‹é‡Šæ”¾é”åï¼Œæ‰èƒ½å–å¾—é”ï¼Œä¹Ÿå°±æ˜¯è¯´è¯»å†™é”è¦ç¡®ä¿çš„æ˜¯å¦‚ä¸‹äº’æ–¥å…³ç³»ï¼Œå¯ä»¥åŒæ—¶è¯»ï¼Œä½†æ˜¯è¯»-å†™ï¼Œå†™-å†™éƒ½æ˜¯äº’æ–¥çš„ã€‚ ğŸˆ Channelæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„. å±•å¼€æŸ¥çœ‹è¯¦æƒ… Channelæ˜¯å¼‚æ­¥è¿›â¾çš„ã€‚
channelå­˜åœ¨3ç§çŠ¶æ€ï¼š
nilï¼Œæœªåˆå§‹åŒ–çš„çŠ¶æ€ï¼Œåªè¿›â¾äº†å£°æ˜ï¼Œæˆ–è€…â¼¿åŠ¨èµ‹å€¼ä¸ºnil nilï¼Œæœªåˆå§‹åŒ–çš„çŠ¶æ€ï¼Œåªè¿›â¾äº†å£°æ˜ï¼Œæˆ–è€…â¼¿åŠ¨èµ‹å€¼ä¸ºnil closedï¼Œå·²å…³é—­ï¼Œåƒä¸‡ä¸è¦è¯¯è®¤ä¸ºå…³é—­channelåï¼Œchannelçš„å€¼æ˜¯nil ğŸ‰ ä¸‹åˆ—å“ªä¸ªç±»å‹å¯ä»¥ä½¿â½¤ cap()å‡½æ•°ï¼Ÿ A. array B. slice C. map D. channel --æŸ¥çœ‹ç­”æ¡ˆ-- ç­”æ¡ˆï¼šA B Dï¼›array è¿”å›æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼›slice è¿”å› slice çš„æœ€â¼¤å®¹é‡ï¼›channel è¿”å› channel çš„å®¹é‡ï¼› ğŸŠ Data Raceé—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿèƒ½ä¸èƒ½ä¸åŠ é”è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ å±•å¼€æŸ¥çœ‹è¯¦æƒ… åŒæ­¥è®¿é—®å…±äº«æ•°æ®æ˜¯å¤„ç†æ•°æ®ç«äº‰çš„â¼€ç§æœ‰æ•ˆçš„â½…æ³•.golangåœ¨1.1ä¹‹åå¼•â¼Šäº†ç«äº‰æ£€æµ‹æœºåˆ¶ï¼Œå¯ä»¥ä½¿â½¤ go run -race æˆ–è€… go build -raceæ¥è¿›â¾é™æ€æ£€æµ‹ã€‚ å…¶åœ¨å†…éƒ¨çš„å®ç°æ˜¯,å¼€å¯å¤šä¸ªåç¨‹æ‰§â¾åŒâ¼€ä¸ªå‘½ä»¤ï¼Œ å¹¶ä¸”è®°å½•ä¸‹æ¯ä¸ªå˜é‡çš„çŠ¶æ€.
ç«äº‰æ£€æµ‹å™¨åŸºäºC/C++çš„ThreadSanitizer è¿â¾æ—¶åº“ï¼Œè¯¥åº“åœ¨Googleå†…éƒ¨ä»£ç åŸºåœ°å’ŒChromiumæ‰¾åˆ°è®¸å¤šé”™è¯¯ã€‚è¿™ä¸ªæŠ€æœ¯åœ¨2012å¹´ä¹â½‰é›†æˆåˆ°Goä¸­ï¼Œä»é‚£æ—¶å¼€å§‹ï¼Œå®ƒå·²ç»åœ¨æ ‡å‡†åº“ä¸­æ£€æµ‹åˆ°42ä¸ªç«äº‰æ¡ä»¶ã€‚ç°åœ¨ï¼Œå®ƒå·²ç»æ˜¯æˆ‘ä»¬æŒç»­æ„å»ºè¿‡ç¨‹çš„â¼€éƒ¨åˆ†ï¼Œå½“ç«äº‰æ¡ä»¶å‡ºç°æ—¶ï¼Œå®ƒä¼šç»§ç»­æ•æ‰åˆ°è¿™äº›é”™è¯¯ã€‚
ç«äº‰æ£€æµ‹å™¨å·²ç»å®Œå…¨é›†æˆåˆ°Goâ¼¯å…·é“¾ä¸­ï¼Œä»…ä»…æ·»åŠ -raceæ ‡å¿—åˆ°å‘½ä»¤â¾å°±ä½¿â½¤äº†æ£€æµ‹å™¨ã€‚
$ go test -race mypkg // æµ‹è¯•åŒ… $ go run -race mysrc.]]></description>
</item>
<item>
  <title>ã€é¢è¯•ã€‘åç«¯é¢è¯•é¢˜é›†02</title>
  <link>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/%E5%90%8E%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%8602/</link>
  <pubDate>Sun, 16 Oct 2022 15:55:37 &#43;0800</pubDate>
  <author>ä½œè€…</author>
  <guid>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/%E5%90%8E%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%8602/</guid>
  <description><![CDATA[æ³¨æ„ æœ¬æ–‡å†…å®¹æ¥æºäºï¼šã€Githubã€‘åç«¯é¢è¯•é¢˜é›† ğŸ† è¯´ä¸‹Goä¸­çš„é”æœ‰å“ªäº›?ä¸‰ç§é”ï¼Œè¯»å†™é”ï¼Œäº’æ–¥é”ï¼Œè¿˜æœ‰mapçš„å®‰å…¨çš„é”? Goä¸­çš„ä¸‰ç§é”åŒ…æ‹¬:äº’æ–¥é”,è¯»å†™é”,sync.Mapçš„å®‰å…¨çš„é”.
äº’æ–¥é”
Goå¹¶å‘ç¨‹åºå¯¹å…±äº«èµ„æºè¿›â¾è®¿é—®æ§åˆ¶çš„ä¸»è¦â¼¿æ®µï¼Œç”±æ ‡å‡†åº“ä»£ç åŒ…ä¸­syncä¸­çš„Mutexç»“æ„ä½“è¡¨ç¤ºã€‚
//Mutex æ˜¯äº’æ–¥é”ï¼Œ é›¶å€¼æ˜¯è§£é”çš„äº’æ–¥é”ï¼Œ â¾¸æ¬¡ä½¿â½¤åä¸å¾—å¤åˆ¶äº’æ–¥é”ã€‚ type Mutex struct { state int32 sema uint32 } sync.MutexåŒ…ä¸­çš„ç±»å‹åªæœ‰ä¸¤ä¸ªå…¬å¼€çš„æŒ‡é’ˆâ½…æ³•Lockå’ŒUnlockã€‚
//Lockerè¡¨ç¤ºå¯ä»¥é”å®šå’Œè§£é”çš„å¯¹è±¡ã€‚ type Locker interface { Lock() Unlock() } //é”å®šå½“å‰çš„äº’æ–¥é‡ //å¦‚æœé”å·²è¢«ä½¿â½¤ï¼Œåˆ™è°ƒâ½¤goroutine //é˜»å¡ç›´åˆ°äº’æ–¥é”å¯â½¤ã€‚ func (m *Mutex) Lock() //å¯¹å½“å‰äº’æ–¥é‡è¿›â¾è§£é” //å¦‚æœåœ¨è¿›â¼Šè§£é”æ—¶æœªé”å®šmï¼Œåˆ™ä¸ºè¿â¾æ—¶é”™è¯¯ã€‚ //é”å®šçš„äº’æ–¥é”ä¸ç‰¹å®šçš„goroutineâ½†å…³ã€‚ //å…è®¸â¼€ä¸ªgoroutineé”å®šMutexç„¶åå®‰æ’å¦â¼€ä¸ªgoroutineæ¥è§£é”å®ƒã€‚ func (m *Mutex) Unlock() å£°æ˜â¼€ä¸ªäº’æ–¥é”ï¼š
var mutex sync.Mutex ä¸åƒCæˆ–Javaçš„é”ç±»â¼¯å…·ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçŠ¯â¼€ä¸ªé”™è¯¯ï¼šå¿˜è®°åŠæ—¶è§£å¼€å·²è¢«é”ä½çš„é”ï¼Œä»â½½å¯¼è‡´æµç¨‹å¼‚å¸¸ã€‚ä½†Goç”±äºå­˜åœ¨deferï¼Œæ‰€ä»¥æ­¤ç±»é—®é¢˜å‡ºç°çš„æ¦‚ç‡æä½ã€‚å…³äºdeferè§£é”çš„â½…å¼å¦‚ä¸‹ï¼š
var mutex sync.Mutex func Write() { mutex.Lock() defer mutex.Unlock() } å¦‚æœå¯¹â¼€ä¸ªå·²ç»ä¸Šé”çš„å¯¹è±¡å†æ¬¡ä¸Šé”ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´è¯¥é”å®šæ“ä½œè¢«é˜»å¡ï¼Œç›´åˆ°è¯¥äº’æ–¥é”å›åˆ°è¢«è§£é”çŠ¶æ€.
ort ( &#34;fmt&#34; &#34;sync&#34; &#34;time&#34; ) func main() { var mutex sync.]]></description>
</item>
<item>
  <title>ã€é¢è¯•ã€‘åç«¯é¢è¯•é¢˜é›†01</title>
  <link>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/%E5%90%8E%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%8601/</link>
  <pubDate>Sat, 15 Oct 2022 23:24:40 &#43;0800</pubDate>
  <author>ä½œè€…</author>
  <guid>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/%E5%90%8E%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%8601/</guid>
  <description><![CDATA[æ³¨æ„ æœ¬æ–‡å†…å®¹æ¥æºäºï¼šã€Githubã€‘åç«¯é¢è¯•é¢˜é›† ğŸ¦ å…³äºæ•´å‹åˆ‡â½šçš„åˆå§‹åŒ–ï¼Œä¸‹â¾¯æ­£ç¡®çš„æ˜¯ï¼Ÿ A. s := make([]int) B. s := make([]int, 0) C. s := make([]int, 5, 10) D. s := []int{1, 2, 3, 4, 5} --æŸ¥çœ‹ç­”æ¡ˆ-- ç­”æ¡ˆï¼šB C D ğŸ§ ä¸‹åˆ—ä»£ç æ˜¯å¦ä¼šè§¦å‘å¼‚å¸¸ï¼Ÿ func Test59(t *testing.T) { runtime.GOMAXPROCS(1) intChan := make(chan int, 1) stringChan := make(chan string, 1) intChan &lt;- 1 stringChan &lt;- &#34;hello&#34; select { case value := &lt;-intChan: fmt.Println(value) case value := &lt;-stringChan: panic(value) } } --æŸ¥çœ‹ç­”æ¡ˆ-- ç­”æ¡ˆï¼šä¸â¼€å®šï¼Œå½“ä¸¤ä¸ªchanåŒæ—¶æœ‰å€¼æ—¶ï¼Œselect ä¼šéšæœºé€‰æ‹©â¼€ä¸ªå¯â½¤é€šé“åšæ”¶å‘æ“ä½œ ğŸ¨ å…³äºchannelçš„ç‰¹æ€§ï¼Œä¸‹â¾¯è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿ A.]]></description>
</item>
<item>
  <title>ã€é¢è¯•ã€‘Goå¸¸è§é¢è¯•é¢˜ã€ç”±æµ…å…¥æ·±ã€‘2022ç‰ˆ</title>
  <link>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/go%E8%AF%AD%E8%A8%80%E9%9D%A2%E8%AF%95%E9%A2%98/</link>
  <pubDate>Thu, 13 Oct 2022 20:36:11 &#43;0800</pubDate>
  <author>ä½œè€…</author>
  <guid>http://runnerxjtu.github.com/blog/posts/go%E8%AF%AD%E8%A8%80/%E9%9D%A2%E8%AF%95/go%E8%AF%AD%E8%A8%80%E9%9D%A2%E8%AF%95%E9%A2%98/</guid>
  <description><![CDATA[æ³¨æ„ æœ¬æ–‡å†…å®¹æ¥æºäºï¼šã€çŸ¥ä¹ã€‘Goå¸¸è§é¢è¯•é¢˜ã€ç”±æµ…å…¥æ·±ã€‘2022ç‰ˆ ğŸ‡ = å’Œ := çš„åŒºåˆ« --æŸ¥çœ‹ç­”æ¡ˆ-- =æ˜¯èµ‹å€¼å˜é‡ï¼Œ:=æ˜¯å®šä¹‰å˜é‡ ğŸˆ æŒ‡é’ˆçš„ä½œç”¨ å±•å¼€æŸ¥çœ‹è¯¦æƒ… è·å–å˜é‡çš„å€¼ import fmt func main(){ a := 1 p := &amp;a // è·å–åœ°å€ fmt.Prinf(*p) // è·å–å€¼ } æ”¹å˜å˜é‡çš„å€¼ // äº¤æ¢å‡½æ•° func swap(a,b *int){ *a,*b = *b,*a; } ç”¨æŒ‡é’ˆæ›¿ä»£ä¼ å…¥å‡½æ•° type A struct{} func (a *A) fun(){} ğŸ‰ Goæœ‰å¼‚å¸¸ç±»å‹å— å±•å¼€æŸ¥çœ‹è¯¦æƒ… æœ‰ã€‚ Goç”¨errorç±»å‹ä»£æ›¿try&hellip;catch
_,err := funcDemo() if err != nil { fmt.Println(err) return } ä¹Ÿå¯ä»¥ç”¨errors.New()æ¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ã€‚
type errorString struct { s string } func (e *errorString) Error() string { return e.]]></description>
</item>
</channel>
</rss>
